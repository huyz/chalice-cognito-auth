{
    "Resources": {
	"APIHandler": {
	    "Properties": {
		"Environment": {
		    "Variables": {
			"POOL_ID": {"Ref": "UserPool"},
			"APP_CLIENT_ID": {"Ref": "UserPoolClient"}
		    }
		}
	    }
	},
	"UserPoolClient": {
	    "Properties": {
		"SupportedIdentityProviders": ["COGNITO"],
		"ExplicitAuthFlows": [
		    "ADMIN_NO_SRP_AUTH",
		    "USER_PASSWORD_AUTH"
		],
		"ReadAttributes": [
		    "address",
		    "birthdate",
		    "email",
		    "email_verified",
		    "family_name",
		    "gender",
		    "given_name",
		    "locale",
		    "middle_name",
		    "name",
		    "nickname",
		    "phone_number",
		    "phone_number_verified",
		    "picture",
		    "preferred_username",
		    "profile",
		    "updated_at",
		    "website",
		    "zoneinfo"
		],
		"RefreshTokenValidity": 30,
		"UserPoolId": {"Ref": "UserPool"},
		"WriteAttributes": [
		    "address",
		    "birthdate",
		    "email",
		    "family_name",
		    "gender",
		    "given_name",
		    "locale",
		    "middle_name",
		    "name",
		    "nickname",
		    "phone_number",
		    "picture",
		    "preferred_username",
		    "profile",
		    "updated_at",
		    "website",
		    "zoneinfo"
		]
	    },
	    "Type": "AWS::Cognito::UserPoolClient"
	},
	"UserPool": {
	    "Type": "AWS::Cognito::UserPool",
	    "Properties": {
		"AdminCreateUserConfig": {
		    "AllowAdminCreateUserOnly": "false",
		    "InviteMessageTemplate": {
			"EmailMessage": "Your username is {username} and temporary password is {####}. ",
			"EmailSubject": "Your temporary password",
			"SMSMessage": "Your username is {username} and temporary password is {####}. "
		    },
		    "UnusedAccountValidityDays": 7
		},
		"AliasAttributes": [
		    "email"
		],
		"AutoVerifiedAttributes": [
		    "email"
		],
		"DeviceConfiguration": {
		    "ChallengeRequiredOnNewDevice": "false",
		    "DeviceOnlyRememberedOnUserPrompt": "true"
		},
		"VerificationMessageTemplate": {
		    "DefaultEmailOption": "CONFIRM_WITH_LINK",
		    "EmailSubjectByLink": "$Subject"
		},
		"MfaConfiguration": "OFF",
		"Policies": {
		    "PasswordPolicy": {
			"MinimumLength": 8,
			"RequireLowercase": "true",
			"RequireNumbers": "false",
			"RequireSymbols": "false",
			"RequireUppercase": "true"
		    }
		},
		"Schema": [
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "false",
			"Name": "sub",
			"Required": "true",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "1"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "name",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "given_name",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "family_name",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "middle_name",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "nickname",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "preferred_username",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "profile",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "picture",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "website",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "email",
			"Required": "true",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "Boolean",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "email_verified",
			"Required": "false"
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "gender",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "birthdate",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "10",
			    "MinLength": "10"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "zoneinfo",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "String",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "locale",
			"Required": "false",
			"StringAttributeConstraints": {
			    "MaxLength": "2048",
			    "MinLength": "0"
			}
		    },
		    {
			"AttributeDataType": "Number",
			"DeveloperOnlyAttribute": "false",
			"Mutable": "true",
			"Name": "updated_at",
			"NumberAttributeConstraints": {
			    "MinValue": "0"
			},
			"Required": "false"
		    }
		],
		"SmsVerificationMessage": "Your verification code is {####}. "
	    }
	}
    }
}
